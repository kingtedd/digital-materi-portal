flowchart TD
    Start[Start] --> SignIn[User navigates to Sign In]
    SignIn --> OAuth[Google OAuth Flow]
    OAuth --> BackendAuth[BFF calls Laravel Auth]
    BackendAuth --> RoleCheck{User Role}
    RoleCheck -->|Teacher| TeacherDashboard[Teacher Dashboard]
    RoleCheck -->|Admin| AdminDashboard[Admin Dashboard]
    TeacherDashboard --> CreateMaterial[Create Material Form]
    CreateMaterial --> SubmitMaterial[Submit Form to BFF]
    SubmitMaterial --> LaravelMaterial[Laravel API Create Material]
    LaravelMaterial --> SheetsWorkflow[Update Google Sheets and Trigger n8n]
    SheetsWorkflow --> ReturnJob[Return job id]
    ReturnJob --> JobStatusPage[Job Status Page]
    JobStatusPage --> PollJobs[Poll Job Status]
    PollJobs -->|Completed| DisplayResults[Display Results]
    TeacherDashboard --> ViewCatalog[View Material Catalog]
    TeacherDashboard --> ViewAnalytics[View Analytics]
    TeacherDashboard --> JobMonitor[Job Monitor]
    AdminDashboard --> ManageUsers[Manage Users]
    AdminDashboard --> SystemAnalytics[View System Analytics]
    AdminDashboard --> ScheduleWorkflow[Manage Scheduling Workflow]
    DisplayResults --> End[End]